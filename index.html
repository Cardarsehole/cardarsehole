<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Presidents and Arsehole Card Game Scorer</title>

  <!-- ✅ Google AdSense site verification (replace with your code) -->
  <meta name="google-site-verification" content="ca-pub-8460279361151582" />

  <!-- ✅ Google AdSense script (ads won’t show until site is verified) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8460279361151582"
     crossorigin="anonymous"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      text-align: center;
    }
    h1 {
      margin-bottom: 10px;
    }
    table {
      margin: 20px auto;
      border-collapse: collapse;
      width: 80%;
    }
    th, td {
      border: 1px solid #444;
      padding: 10px;
      text-align: center;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
    }
    .history {
      margin-top: 30px;
      text-align: left;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    .history h2 {
      cursor: pointer;
    }
    .collapsed {
      display: none;
    }
  </style>
</head>
<body>
  <h1>Presidents and Arsehole Card Game Scorer</h1>
  <button onclick="resetScores()">Reset All</button>

  <div>
    <label for="playerCount">Number of players:</label>
    <input type="number" id="playerCount" min="4" value="4" onchange="updatePlayers()" />
    <button onclick="addPlayer()">Add Player</button>
  </div>

  <table id="scoreTable">
    <thead>
      <tr>
        <th>Player</th>
        <th>Score</th>
      </tr>
    </thead>
    <tbody id="scoreBody"></tbody>
  </table>

  <div>
    <button onclick="recordGame()">Record Game</button>
    <p>Total Games Played: <span id="gameCount">0</span></p>
  </div>

  <div class="history">
    <h2 onclick="toggleHistory()">Game History ▼</h2>
    <div id="historyContent"></div>
  </div>

  <script>
    let players = [];
    let scores = {};
    let gameCount = 0;
    let historyCollapsed = false;

    function updatePlayers() {
      const count = parseInt(document.getElementById('playerCount').value);
      if (players.length < count) {
        for (let i = players.length; i < count; i++) {
          const name = prompt("Enter player " + (i + 1) + " name:");
          players.push(name || "Player " + (i + 1));
          scores[players[i]] = 0;
        }
      } else if (players.length > count) {
        players = players.slice(0, count);
      }
      renderTable();
    }

    function addPlayer() {
      const name = prompt("Enter new player name:");
      if (name) {
        players.push(name);
        scores[name] = 0;
        document.getElementById('playerCount').value = players.length;
        renderTable();
      }
    }

    function renderTable() {
      const tbody = document.getElementById('scoreBody');
      tbody.innerHTML = '';
      players.forEach(player => {
        const row = `<tr><td>${player}</td><td>${scores[player]}</td></tr>`;
        tbody.innerHTML += row;
      });
    }

    function recordGame() {
      if (players.length < 4) {
        alert("At least 4 players required.");
        return;
      }

      const positions = ["President", "Vice President"];
      if (players.length > 4) positions.push("Neutral");
      positions.push("Scrotum", "Arsehole");

      const round = {};
      players.forEach(player => {
        let pos;
        do {
          pos = prompt(`Enter position for ${player} (${positions.join(", ")}):`);
        } while (!positions.includes(pos));
        round[player] = pos;
      });

      const scoresThisRound = {};
      players.forEach(player => {
        let pts = 0;
        if (round[player] === "President") pts = players.length > 4 ? 5 : 4;
        else if (round[player] === "Vice President") pts = players.length > 4 ? 4 : 3;
        else if (round[player] === "Neutral") pts = 3;
        else if (round[player] === "Scrotum") pts = 2;
        else if (round[player] === "Arsehole") pts = 1;

        scores[player] += pts;
        scoresThisRound[player] = pts;
      });

      gameCount++;
      document.getElementById('gameCount').innerText = gameCount;
      renderTable();
      addHistory(round, scoresThisRound);
    }

    function addHistory(round, scoresThisRound) {
      const history = document.getElementById('historyContent');
      let entry = `<p><strong>Game ${gameCount}</strong><br>`;
      players.forEach(player => {
        entry += `${player}: ${round[player]} (+${scoresThisRound[player]})<br>`;
      });
      entry += '</p>';
      history.innerHTML += entry;
    }

    function resetScores() {
      if (!confirm("Are you sure you want to reset everything?")) return;
      scores = {};
      players.forEach(p => scores[p] = 0);
      gameCount = 0;
      document.getElementById('gameCount').innerText = 0;
      document.getElementById('historyContent').innerHTML = '';
      renderTable();
    }

    function toggleHistory() {
      historyCollapsed = !historyCollapsed;
      document.getElementById('historyContent').className = historyCollapsed ? "collapsed" : "";
    }

    updatePlayers();
  </script>
</body>
</html>
